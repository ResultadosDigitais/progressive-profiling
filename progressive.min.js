function setProgressiveProfiling(e){if(form=document.getElementById("conversion-form"),form.setAttribute("onsubmit","setLeadProfile()"),"undefined"!=typeof Storage){var t;t=localStorage.progProfile?JSON.parse(localStorage.getItem("progProfile")):{},void 0==t.userLevel&&(t.userLevel="0"),userLevel=Number(t.userLevel);var r="https://spreadsheets.google.com/feeds/list/"+e+"/od6/public/basic?hl=en_US&alt=json";$.getJSON(r,function(e){try{_gaq.push(["_trackEvent","ProgressiveProfiling","form_seen_"+t.userLevel])}catch(r){}for(var i,l=[],s=e.feed.entry,a=1;a<s.length;a++){var o=s[a].content.$t.split(/[:;]+/);if(i=Number(o[1].slice(0,o[1].length-8).replace(" ","")),i==userLevel&&o.length>5){var n={};n.label=o[2].slice(0,o[2].length-8),n.id=o[3].slice(0,o[3].length-8).replace(" ",""),"email"==n.id&&(formHasEmail=!0),n.type=o[4].slice(0,o[4].length-8).replace(" ",""),n.options=o.slice(5,o.length),l.push(n)}i>numberOfLevels&&(numberOfLevels=i)}setForm(t,l)}).error(function(){try{_gaq.push(["_trackEvent","ProgressiveProfiling","form_seen_err"])}catch(e){}})}}function setForm(e,t){for(var r=form.getElementsByClassName("field"),i=r.length-2;i>=0;i--)form.removeChild(r[i]);if(!formHasEmail){var l=document.createElement("input");l.setAttribute("type","hidden"),l.setAttribute("id","email"),l.setAttribute("name","email"),l.setAttribute("value",e.userEmail),l.setAttribute("class","form-control  required"),form.appendChild(l)}for(var i=0;i<t.length;i++){var s=t[i].id.replace("[","_").replace("]",""),a=document.createElement("div");a.setAttribute("class","field"),form.insertBefore(a,r[r.length-1]);var o=document.createElement("label");if(o.innerHTML=t[i].label+"*",o.setAttribute("for",s),a.appendChild(o),"select"==t[i].type){var n=document.createElement("select"),u=document.createElement("option");u.value="",u.innerHTML="Selecione",n.appendChild(u);for(var m=0;m<t[i].options.length;m++){var c=document.createElement("option");c.value=t[i].options[m].trim(),c.innerHTML=c.value,n.appendChild(c)}n.setAttribute("class","form-control  required"),n.setAttribute("id",s),n.setAttribute("name",t[i].id),a.appendChild(n)}else if("radio"==t[i].type)for(var m=0;m<t[i].options.length;m++){var d=document.createElement("div");d.setAttribute("class","radio"),a.appendChild(d);var v=document.createElement("label");d.appendChild(v);var f=document.createElement("input");f.setAttribute("type","radio"),f.value=t[i].options[m].trim(),f.setAttribute("class"," required"),f.setAttribute("id",s+"_"+n.value),f.setAttribute("name",t[i].id),v.appendChild(f),v.insertAdjacentHTML("beforeend",f.value)}else{var n=document.createElement("input");n.setAttribute("type",t[i].type),n.setAttribute("class","form-control  required"),n.setAttribute("id",s),n.setAttribute("name",t[i].id),a.appendChild(n)}"email"==n.getAttribute("id")&&void 0!=e.userEmail&&(n.value=e.userEmail)}}function setLeadProfile(){if("undefined"!=typeof Storage){var e,t=document.getElementById("email"),r=new Date;if(-1==numberOfLevels)try{_gaq.push(["_trackEvent","ProgressiveProfiling","form_conv_err"])}catch(i){}else try{_gaq.push(["_trackEvent","ProgressiveProfiling","form_conv_"+userLevel])}catch(i){}localStorage.progProfile?(e=JSON.parse(localStorage.getItem("progProfile")),e.userLastVisit=r.getTime(),void 0==e.userLevel?e.userLevel="1":e.userLevel<numberOfLevels&&e.userLevel++):(e={},e.userFirstVisit=r.getTime(),e.userLastVisit=e.userFirstVisit,e.userEmail=t.value,e.userLevel="1",e.userLevelAgency="0"),localStorage.setItem("progProfile",JSON.stringify(e))}}var form,numberOfLevels=-1,formHasEmail=!1,userLevel;
