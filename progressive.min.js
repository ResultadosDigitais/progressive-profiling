function setProgressiveProfiling(spreadsheetID){if(form=document.getElementById("conversion-form"),progessiveProfiling=form.getAttribute("data-progressive-profiling"),null!==progessiveProfiling&&(form.setAttribute("onsubmit","setLeadProfile()"),"undefined"!=typeof Storage)){var progProfile;progProfile=localStorage.progProfile?JSON.parse(localStorage.getItem("progProfile")):{},void 0==progProfile.userLevel&&(progProfile.userLevel="0"),userLevel=Number(progProfile.userLevel);var jsUrl="https://spreadsheets.google.com/feeds/list/"+spreadsheetID+"/od6/public/basic?hl=en_US&alt=json";$.getJSON(jsUrl,function(result){try{_gaq.push(["_trackEvent","ProgressiveProfiling","form_seen_"+progProfile.userLevel])}catch(err){}for(var columnLevel,fields=[],entries=result.feed.entry,i=1;i<entries.length;i++){var cells=entries[i].content.$t.split(/[:;]+/);if(columnLevel=Number(cells[1].slice(0,cells[1].length-8).replace(" ","")),columnLevel==userLevel&&cells.length>5){var field={};field.label=cells[2].slice(0,cells[2].length-8),field.id=cells[3].slice(0,cells[3].length-8).replace(" ",""),"email"==field.id&&(formHasEmail=!0),field.type=cells[4].slice(0,cells[4].length-8).replace(" ",""),field.options=cells.slice(5,cells.length),fields.push(field)}columnLevel>numberOfLevels&&(numberOfLevels=columnLevel)}setForm(progProfile,fields)}).error(function(){try{_gaq.push(["_trackEvent","ProgressiveProfiling","form_seen_err"])}catch(err){}})}}function setForm(progProfile,fields){for(var actualFields=form.getElementsByClassName("field"),i=actualFields.length-2;i>=0;i--)form.removeChild(actualFields[i]);if(!formHasEmail){var emailInput=document.createElement("input");emailInput.setAttribute("type","hidden"),emailInput.setAttribute("id","email"),emailInput.setAttribute("name","email"),emailInput.setAttribute("value",progProfile.userEmail),emailInput.setAttribute("class","form-control  required"),form.appendChild(emailInput)}for(var i=0;i<fields.length;i++){var inputId=fields[i].id.replace("[","_").replace("]",""),newField=document.createElement("div");newField.setAttribute("class","field"),form.insertBefore(newField,actualFields[actualFields.length-1]);var newLabel=document.createElement("label");if(newLabel.innerHTML=fields[i].label+"*",newLabel.setAttribute("for",inputId),newField.appendChild(newLabel),"select"==fields[i].type){var newInput=document.createElement("select"),nullOpt=document.createElement("option");nullOpt.value="",nullOpt.innerHTML="Selecione",newInput.appendChild(nullOpt);for(var j=0;j<fields[i].options.length;j++){var newOpt=document.createElement("option");newOpt.value=fields[i].options[j].trim(),newOpt.innerHTML=newOpt.value,newInput.appendChild(newOpt)}newInput.setAttribute("class","form-control  required"),newInput.setAttribute("id",inputId),newInput.setAttribute("name",fields[i].id),newField.appendChild(newInput)}else if("radio"==fields[i].type)for(var j=0;j<fields[i].options.length;j++){var radioDiv=document.createElement("div");radioDiv.setAttribute("class","radio"),newField.appendChild(radioDiv);var radioLabel=document.createElement("label");radioDiv.appendChild(radioLabel);var radioInput=document.createElement("input");radioInput.setAttribute("type","radio"),radioInput.value=fields[i].options[j].trim(),radioInput.setAttribute("class"," required"),radioInput.setAttribute("id",inputId+"_"+newInput.value),radioInput.setAttribute("name",fields[i].id),radioLabel.appendChild(radioInput),radioLabel.insertAdjacentHTML("beforeend",radioInput.value)}else{var newInput=document.createElement("input");newInput.setAttribute("type",fields[i].type),newInput.setAttribute("class","form-control  required"),newInput.setAttribute("id",inputId),newInput.setAttribute("name",fields[i].id),newField.appendChild(newInput)}"email"==newInput.getAttribute("id")&&void 0!=progProfile.userEmail&&(newInput.value=progProfile.userEmail)}}function setLeadProfile(){if("undefined"!=typeof Storage){var progProfile,userEmail=document.getElementById("email"),date=new Date;if(numberOfLevels==-1)try{_gaq.push(["_trackEvent","ProgressiveProfiling","form_conv_err"])}catch(err){}else try{_gaq.push(["_trackEvent","ProgressiveProfiling","form_conv_"+userLevel])}catch(err){}localStorage.progProfile?(progProfile=JSON.parse(localStorage.getItem("progProfile")),progProfile.userLastVisit=date.getTime(),void 0==progProfile.userLevel?progProfile.userLevel="1":progProfile.userLevel<numberOfLevels&&progProfile.userLevel++):(progProfile={},progProfile.userFirstVisit=date.getTime(),progProfile.userLastVisit=progProfile.userFirstVisit,progProfile.userEmail=userEmail.value,progProfile.userLevel="1",progProfile.userLevelAgency="0"),localStorage.setItem("progProfile",JSON.stringify(progProfile))}}var form,numberOfLevels=-1,formHasEmail=!1,userLevel,progessiveProfiling;